#!/usr/bin/env bash
#
#
# install-arch-dialog: Instala o Arch Linux
#
# Site:       N/A
# Autor:      Jefferson Santana
# Manutenção: Jefferson Santana
#
# ---------------------------------------------------------------------------------- #
#  Um instalador basico com dialog
#
#  Exemplos:
#      $ install-arch-dialog
#      Inícia o instalador
# ---------------------------------------------------------------------------------- #
# Histórico:
#
#   v0.0.1 02/06/2020, Jefferson:
#       - Início do programa
# ---------------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------------- #
# Testado em:
#   bash     v5.0.17(1)-release
#   dialog   v1.3-20200327
# ---------------------------------------------------------------------------------- #
# Agradecimentos:
#
# ---------------------------------------------------------------------------------- #

. libs/*
. language/*
. etc/install-arch-dialog.config

installarch () {
proxima='primeira'

# loop principal
while : ; do

	# Aqui � identificada qual tela deve ser mostrada.
	# Em cada tela s�o definidas as vari�veis 'anterior'
	# e 'proxima' # que definem os rumos da navega��o.
	case "$proxima" in
		primeira)
			proxima='fuidioma'
			dialog --title "$msginstallarch" \
				--msgbox "$msginstall" 0 0
			;;
	        fuidioma)
			anterior='primeira'
			proxima='fulayout'
			fuidioma
			;;
                fulayout)
			anterior='fuidioma'
			proxima='fuzoneinfo'
			fulayout
			;;
              fuzoneinfo)
		        anterior='fulayout'
			proxima=''
			fuzoneinfo
			;;
		   final)
			;;
		*)
			echo "Janela desconhecida '$proxima'."
			echo "Abortando programa..."
			exit
	esac

	# Aqui � feito o tratamento gen�rico de C�digo de Retorno
	# de todas as telas. Volta para a tela anterior se for
	# CANCELAR, sai do programa se for ESC.
	retorno=$?
	[ $retorno -eq 1   ] && proxima="$anterior"   # cancelar
	[ $retorno -eq 255 ] && break                 # Esc

done

}

installarch

echo "$didioma"
echo "$teclayout"
echo "$dzoneinfo"
